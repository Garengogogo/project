<!--
  Generated template for the MessagesDetailPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title><img *ngIf="fromUserInfo.attributes.headimg" [(src)]="fromUserInfo.attributes.headimg" width="20" height="20"> {{pageTitle}}</ion-title>
    
  </ion-navbar>
</ion-header>
<ion-content padding scrollDownOnLoad="true">
  <ng-container *ngFor="let msg of messages">
    <ion-card *ngIf="msg.attributes.from!==currentUser.attributes.username">
      <ion-item>
        <ion-avatar item-start>
          <img src="assets/images/logo.png" *ngIf="from=='system'">
          <img src="{{fromUserIcon}}" *ngIf="from!='system' && fromUserIcon">
          <img src="assets/images/defaulthead.png" *ngIf="from!='system' && !fromUserIcon">
        </ion-avatar>
        <h2  *ngIf="from=='system'">Maker System</h2>
        <h2  *ngIf="from!='system'">{{msg.attributes.from}}</h2>
        <p>{{msg.createdAt}}</p>
      </ion-item>
      <ion-card-content>
        {{msg.attributes.message}}
       
      </ion-card-content>

    </ion-card>
    <ion-card *ngIf="msg.attributes.from==currentUser.attributes.username">
      <ion-item>
        <ion-avatar item-end>
        
          <img src="{{currentUser.attributes.headimg}}" *ngIf="currentUser.attributes.headimg">
          <img src="assets/images/defaulthead.png" *ngIf="!currentUser.attributes.headimg">
        </ion-avatar>
        <h2 >{{currentUser.attributes.username}}</h2>
        <p>{{msg.createdAt}}</p>
      </ion-item>
      <ion-card-content>
        {{msg.attributes.message}}
       
      </ion-card-content>

    </ion-card>
  </ng-container>

</ion-content>



<ion-footer *ngIf="from!=='system'">
  <ion-toolbar>
    <ion-input type="text"
                  placeholder="说点什么" [(ngModel)]="msgText"></ion-input>
    <ion-buttons end>
      <button ion-button icon-right color="royal" (click)="sendMsg()">
        发送
        <ion-icon name="send"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>


